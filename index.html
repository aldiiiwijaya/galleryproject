<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aldi Creative Portfolio</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; -webkit-font-smoothing: antialiased; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; overflow: auto; }
body.aldi-popup-open { overflow: visible; position: static; width: auto; height: auto; }
.aldi-main-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
.aldi-popup-overlay { position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; padding: 20px; opacity: 1; visibility: visible; width: 100%; height: auto; min-height: auto; }
.aldi-popup-content { background: linear-gradient(145deg, rgba(15, 15, 26, 0.95), rgba(26, 26, 46, 0.9)); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 16px; width: 100%; max-width: 1200px; max-height: 90vh; position: relative; overflow: hidden; margin: auto; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); }
.aldi-header { padding: 16px 24px; border-bottom: 1px solid rgba(255, 255, 255, 0.15); display: flex; justify-content: center; align-items: center; position: sticky; top: 0; background: inherit; backdrop-filter: inherit; z-index: 10; min-height: 64px; position: relative; }
.aldi-title { font-size: 20px; font-weight: 700; background: linear-gradient(135deg, #fff 0%, #C4B5FD 50%, #E0E7FF 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; text-align: center; }
.aldi-close { background: rgba(255, 255, 255, 0.15); border: none; color: #fff; font-size: 24px; cursor: pointer; padding: 8px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; position: absolute; right: 24px; top: 50%; transform: translateY(-50%); }
.aldi-close:hover { background: rgba(255, 255, 255, 0.25); transform: translateY(-50%) rotate(90deg) scale(1.1); }
.aldi-body { padding: 0; max-height: calc(90vh - 64px); overflow-y: auto; overflow-x: hidden; scrollbar-width: none; -ms-overflow-style: none; }
.aldi-body::-webkit-scrollbar { display: none; }
.aldi-video-page { display: none; padding: 30px 20px 40px; animation: aldi-fadeIn 0.5s ease-out; }
.aldi-photo-page { display: none; padding: 20px; animation: aldi-fadeIn 0.5s ease-out; }
.aldi-detail-header { text-align: center; margin-bottom: 40px; }
.aldi-detail-title { font-size: 32px; font-weight: 600; background: linear-gradient(135deg, #fff 0%, #e2e8f0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 16px; line-height: 1.3; text-align: center; }
.aldi-detail-description { color: rgba(255, 255, 255, 0.7); font-size: 16px; max-width: 600px; margin: 0 auto; line-height: 1.6; text-align: center; }
.aldi-videos-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; max-width: 1000px; margin: 32px auto 0; justify-content: center; }
.aldi-photo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; padding-bottom: 20px; flex: none; align-content: start; justify-items: center; width: 100%; box-sizing: border-box; }
.aldi-video-card { background: linear-gradient(145deg, rgba(15, 15, 26, 0.85), rgba(26, 26, 46, 0.7)); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.08); border-top: 1px solid rgba(255, 255, 255, 0.15); border-radius: 16px; padding: 16px; transition: all 0.4s ease; position: relative; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3); opacity: 0; transform: translateY(30px) scale(0.9); animation: aldi-videoFadeIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; cursor: pointer; width: 100%; height: fit-content; }
.aldi-photo-item { width: 150px; height: 150px; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); position: relative; background: rgba(0, 0, 0, 0.2); touch-action: manipulation; opacity: 0; transform: translateY(30px) scale(0.9); animation: aldi-photoFadeIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; will-change: transform, box-shadow; }
@keyframes aldi-videoFadeIn { to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes aldi-photoFadeIn { to { opacity: 1; transform: translateY(0) scale(1); } }
.aldi-video-card::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent); transition: left 0.6s ease; opacity: 0; z-index: 1; pointer-events: none; border-radius: inherit; }
.aldi-video-card:hover::before { opacity: 1; left: 100%; }
.aldi-video-card:hover { transform: scale(1.03) translateY(-8px); background: linear-gradient(145deg, rgba(15, 15, 26, 0.9), rgba(26, 26, 46, 0.8)); backdrop-filter: blur(15px); border-color: rgba(255, 255, 255, 0.2); box-shadow: 0 20px 40px rgba(122, 102, 204, 0.3); z-index: 10; }
.aldi-photo-item:hover { transform: scale(1.25) translateY(-12px); box-shadow: 0 10px 20px rgba(122, 102, 204, 0.4), 0 5px 10px rgba(0, 0, 0, 0.2); z-index: 2; filter: brightness(1.1); }
.aldi-photo-item:active { transform: scale(1.1) translateY(-6px); transition: all 0.15s ease; }
.aldi-video-wrapper { position: relative; width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: 12px; margin-bottom: 12px; background: transparent; flex-shrink: 0; }
.aldi-video-wrapper iframe { width: 100%; height: 100%; border: none; position: relative; z-index: 2; border-radius: 12px; background: transparent; }
.aldi-photo-item img { width: 100%; height: 100%; object-fit: cover; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); loading: lazy; will-change: transform; }
.aldi-photo-item:hover img { transform: scale(1.15); }
.aldi-video-title { font-size: 18px; font-weight: 600; line-height: 1.3; margin-bottom: 8px; color: #fff; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); text-align: center; position: relative; z-index: 2; }
.aldi-lightbox { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 99998; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s ease; padding: 20px; }
.aldi-lightbox.aldi-active { opacity: 1; visibility: visible; }
.aldi-lightbox-content { position: relative; max-width: 90vw; max-height: 90vh; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
.aldi-lightbox-video { width: 55vw; height: 30.9vw; max-width: 750px; max-height: 422px; min-width: 400px; min-height: 225px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); display: none; }
.aldi-lightbox-img { max-width: 100%; max-height: 100%; width: auto; height: auto; border-radius: 24px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); object-fit: contain; display: none; }
.aldi-lightbox-close { position: fixed; top: 60px; right: 30px; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3); color: #fff; font-size: 22px; cursor: pointer; padding: 14px; border-radius: 50%; transition: all 0.3s ease; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; z-index: 99999; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7); }
.aldi-lightbox-close:hover { background: rgba(255, 255, 255, 0.9) !important; color: #000 !important; transform: rotate(90deg) scale(1.1) !important; border-color: rgba(0, 0, 0, 0.2) !important; }
.aldi-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px); border: none; color: #fff; font-size: 20px; padding: 12px 16px; cursor: pointer; border-radius: 50%; transition: all 0.3s ease; }
.aldi-nav:hover { background: rgba(255, 255, 255, 0.9); color: #000; transform: translateY(-50%) scale(1.2); }
.aldi-prev { left: 20px; }
.aldi-next { right: 20px; }
.aldi-loading { display: flex; align-items: center; justify-content: center; height: 150px; color: #fff; font-size: 16px; grid-column: 1 / -1; }
.aldi-error { display: flex; align-items: center; justify-content: center; height: 150px; color: #ff6b6b; font-size: 16px; grid-column: 1 / -1; }
@keyframes aldi-fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@media (max-width: 1366px) and (min-width: 1024px) { .aldi-popup-overlay { padding: 60px 20px; } .aldi-popup-content { max-height: 75vh; } .aldi-body { max-height: calc(75vh - 64px); } .aldi-lightbox-video { width: 60vw; height: 33.8vw; max-width: 700px; max-height: 394px; } }
@media (max-width: 768px) { .aldi-popup-overlay { padding: 40px 10px; } .aldi-popup-content { width: 96vw; max-height: 75vh; border-radius: 12px; } .aldi-header { padding: 12px 16px; min-height: 56px; } .aldi-title { font-size: 18px; } .aldi-close { width: 36px; height: 36px; font-size: 20px; right: 16px; } .aldi-close:hover { transform: translateY(-50%) rotate(90deg) scale(1.1); } .aldi-body { max-height: calc(75vh - 56px); } .aldi-video-page { padding: 25px 15px 35px; } .aldi-photo-page { padding: 12px; } .aldi-videos-grid { grid-template-columns: 1fr; gap: 20px; padding-bottom: 20px; } .aldi-photo-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 8px; padding-bottom: 12px; } .aldi-video-card { padding: 16px; height: fit-content; max-width: none; } .aldi-video-card:hover { transform: scale(1.02) translateY(-4px); } .aldi-photo-item { width: 100px; height: 100px; border-radius: 12px; } .aldi-photo-item:hover { transform: scale(1.15) translateY(-6px); box-shadow: 0 8px 16px rgba(122, 102, 204, 0.4), 0 4px 8px rgba(0, 0, 0, 0.1); } .aldi-video-title { font-size: 16px; } .aldi-detail-title { font-size: 24px; } .aldi-detail-description { font-size: 14px; } .aldi-lightbox-content { max-width: 95vw; max-height: 85vh; } .aldi-lightbox-video { width: 92vw; height: 51.8vw; min-width: 280px; min-height: 158px; max-width: 700px; max-height: 394px; } .aldi-lightbox-img { max-width: 70vw; max-height: 50vh; } .aldi-lightbox-close { top: 40px; right: 20px; width: 36px; height: 36px; } .aldi-lightbox-close:hover { top: 40px; right: 20px; } .aldi-nav { font-size: 18px; padding: 10px 14px; } .aldi-prev { left: 10px; } .aldi-next { right: 10px; } }
@media (max-width: 480px) { .aldi-popup-overlay { padding: 35px 8px; } .aldi-popup-content { width: 96vw; max-height: 70vh; border-radius: 8px; } .aldi-body { max-height: calc(70vh - 56px); } .aldi-video-page { padding: 20px 12px 30px; } .aldi-photo-page { padding: 10px; } .aldi-photo-grid { grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 6px; padding-bottom: 10px; } .aldi-video-card { height: fit-content; padding: 14px; margin-bottom: 5px; } .aldi-video-card:last-child { margin-bottom: 15px; } .aldi-photo-item { width: 80px; height: 80px; border-radius: 10px; } .aldi-photo-item:hover { transform: scale(1.1) translateY(-4px); box-shadow: 0 6px 12px rgba(122, 102, 204, 0.3), 0 3px 6px rgba(0, 0, 0, 0.1); } .aldi-video-title { font-size: 15px; } .aldi-detail-title { font-size: 20px; } }
@supports (padding-top: env(safe-area-inset-top)) { .aldi-lightbox-close { top: max(60px, calc(env(safe-area-inset-top) + 40px)); } @media (max-width: 768px) { .aldi-lightbox-close { top: max(40px, calc(env(safe-area-inset-top) + 20px)); } .aldi-lightbox-close:hover { top: max(40px, calc(env(safe-area-inset-top) + 20px)) !important; } .aldi-popup-overlay { padding-top: max(40px, calc(env(safe-area-inset-top) + 20px)); padding-bottom: max(40px, calc(env(safe-area-inset-bottom) + 20px)); } } @media (max-width: 480px) { .aldi-popup-overlay { padding-top: max(35px, calc(env(safe-area-inset-top) + 15px)); padding-bottom: max(35px, calc(env(safe-area-inset-bottom) + 15px)); } } }
@media (hover: none) and (pointer: coarse) { .aldi-video-card:hover { transform: none; background: inherit; backdrop-filter: blur(10px); border-color: rgba(255, 255, 255, 0.08); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3); } .aldi-video-card:active { transform: scale(0.98); transition: transform 0.1s ease; } .aldi-video-card:hover::before { opacity: 0; } }
@supports not (backdrop-filter: blur(10px)) { .aldi-video-card { background: linear-gradient(145deg, #0f0f1a, #1a1a2e); } }
</style>
</head>
<body>
<div class="aldi-main-container">
<div class="aldi-popup-overlay" id="aldiPopupOverlay">
<div class="aldi-popup-content">
<div class="aldi-header">
<h2 class="aldi-title" id="aldiPopupTitle">Portfolio</h2>
<button class="aldi-close" onclick="aldiClosePopup()" type="button">&times;</button>
</div>
<div class="aldi-body">
<div class="aldi-video-page" id="aldiVideoPage">
<div class="aldi-detail-header">
<h1 class="aldi-detail-title" id="aldiClientTitle">Client Videos</h1>
<p class="aldi-detail-description" id="aldiClientDescription">Client video portfolio</p>
</div>
<div class="aldi-videos-grid" id="aldiVideosGrid">
<div class="aldi-loading">Loading videos...</div>
</div>
</div>
<div class="aldi-photo-page" id="aldiPhotoPage">
<div class="aldi-photo-grid" id="aldiPhotoGrid">
<div class="aldi-loading">Loading photos...</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="aldi-lightbox" id="aldiLightbox">
<div class="aldi-lightbox-content">
<iframe class="aldi-lightbox-video" id="aldiLightboxVideo" allowfullscreen></iframe>
<img class="aldi-lightbox-img" id="aldiLightboxImg" alt="Photo">
<button class="aldi-lightbox-close" onclick="aldiCloseLightbox()" type="button">&times;</button>
<button class="aldi-nav aldi-prev" onclick="aldiPrevItem()" type="button">&lt;</button>
<button class="aldi-nav aldi-next" onclick="aldiNextItem()" type="button">&gt;</button>
</div>
</div>
<script>
(function() {
'use strict';
const aldiData = { 
  clientVideos: { 
    '8amities': { 
      title: "8'amities", 
      description: "Konten visual fashion kasual yang memperkuat branding dan daya tarik audiens dengan foto dan video dinamis.", 
      videos: [ 
        {title: "8'Amities Astro", id: "1eVyUJjRVVBAOSIEDDRUPq-w9SinkjbNq"}, 
        {title: "8'Amities Stan", id: "1wvkUBOtxGbA-yKIOx3evA5FRWTclbkEG"}, 
        {title: "8'Amities GBK", id: "1oog_2GnLg5Bf7ygQh9LgY5dZPIrVwr-m"} 
      ] 
    }, 
    'cemilanketo': { 
      title: "Cemilan Keto", 
      description: "Konten edukatif cemilan sehat keto yang menampilkan produk berkualitas dengan visual menggugah selera.", 
      videos: [ 
        {title: "Pizza", id: "1ylrXLPCeESz0uhx2AFLWm1MO2ioz0-q5"}, 
        {title: "Jajanan Pasar", id: "1yVkp8z7oTmDw_piImzHLL-8WzUlWuhR5"}, 
        {title: "Dimsum", id: "1Yo4mu28jNF7rEBy7LGVR3vyah7UJQpon"}, 
        {title: "Olahan Ayam", id: "1O01ZMw55-Ahm7Nl6tmM33OSpgwLZuEhD"} 
      ] 
    },
    'ribsgold': {
      title: "Ribsgold",
      description: "Strategi konten unisex fashion yang menyasar pria dan wanita dengan visual modern dan gaya kontemporer.",
      videos: [
        { title: "Kemeja Togs", id: "1Z92xucR5FNXt-Vl0QjfScgBPSKNdu2Bn" },
        { title: "Bevery Unique", id: "19oKWsTqhWSGkc2DNS13pHqwYqqnnv2d2" },
        { title: "Kemeja Flanel", id: "10G217ouwOhJyTqpU0kjvWEFgKF0-0cBe" },
        { title: "Tampil Timless", id: "1ll48B46L1iXRlLG7IkE6o_4rAKYvtNnJ" },
        { title: "Outfit Sehari Hari", id: "1hY_q2AWmFqWHCI0PiEvzHAne6Eo4L54v" },
        { title: "Anak Motor", id: "1nJ09BvdcahFq0oZm_wLGPK2qJ7VfmLir" },
        { title: "Drama Rese", id: "1HnKdnOHXbWXUvRnzba6Q0eTeIIRZ2h3i" },
        { title: "Kado Buat Ayah", id: "1aElb50aKJoXbg40xYJSU_j2wo2WPZZNr" }
      ]
    },
    'bymanda': {
      title: "Bymanda",
      description: "Strategi media sosial kreatif dengan konten visual yang efektif menyampaikan pesan brand dan engagement.",
      videos: [
        { title: "Cadar", id: "1d3kCw4Jrut3qRPqSGYQ_ERL87FSc7k-C" },
        { title: "Gamis I", id: "1WUgGKElKs1oU1Pwne38JGGPn3cMAc4ox" },
        { title: "Gamis II", id: "1OeCJOINqDVeVdpBgzEOWvYrK9KW6Opr8" },
        { title: "Mukena", id: "1DD-y6ceziLZ5kVEIF3UvA5f1QbY43Quh" }
      ]
    }
  }, 
  portfolios: { 
    'amities': { 
      title: "8'Amities Fashion Photography", 
      path: "8'Amities/", 
      photos: [ 'Astro%20(1).webp', 'Astro%20(2).webp', 'Astro%20(3).webp', 'Astro%20(4).webp', 'Astro%20(5).webp', 'GBK%20(1).webp', 'GBK%20(2).webp', 'GBK%20(3).webp', 'GBK%20(4).webp', 'GBK%20(5).webp', 'Stan%20(1).webp', 'Stan%20(2).webp', 'Stan%20(3).webp', 'Stan%20(4).webp', 'Stan%20(5).webp' ] 
    }, 
    'accent': { 
      title: 'Accent Ambios Product Photography', 
      path: 'Accent%20Ambios/', 
      photos: Array.from({length: 10}, (v, k) => `Accent%20Ambios%20(${k + 1}).webp`) 
    }, 
    'ribsgold': { 
      title: 'Ribsgold Product Photography', 
      path: 'Ribsgold/', 
      photos: Array.from({length: 10}, (v, k) => `Ribsgold%20(${k + 1}).webp`) 
    }, 
    'kopi': { 
      title: 'Kopi Bituka Cafe Photography', 
      path: 'Kopi%20Bituka/', 
      photos: Array.from({length: 10}, (v, k) => `Kopi%20Bituka%20(${k + 1}).webp`) 
    }, 
    'bride': { 
      title: 'White Bride Wedding Collection', 
      path: 'White%20Bride/', 
      photos: Array.from({length: 10}, (v, k) => `White%20Bride%20(${k + 1}).webp`) 
    } 
  } 
};

// Variables
const aldiBaseUrl = 'https://raw.githubusercontent.com/aldiiiwijaya/aldiiiwijaya_/main/Foto/Foto%20';
let aldiCurrentItems = [];
let aldiCurrentIndex = 0;
let aldiCurrentType = '';
let aldiImageCache = new Map();
let aldiTouchStartX = 0;
let aldiTouchEndX = 0;
let aldiTouchStartTime = 0;

// Helper functions
function aldiGetEl(id) { return document.getElementById(id); }
function aldiGetUrlParam(param) { return new URLSearchParams(window.location.search).get(param); }

// Image preloading
function aldiPreloadImage(src) { return new Promise((resolve, reject) => { if (aldiImageCache.has(src)) { resolve(aldiImageCache.get(src)); return; } const img = new Image(); img.onload = () => { aldiImageCache.set(src, img); resolve(img); }; img.onerror = reject; img.src = src; }); }

// Image observer for lazy loading
const aldiImageObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; aldiPreloadImage(img.dataset.src).then(() => { img.src = img.dataset.src; img.classList.add('aldi-loaded'); }).catch(() => { img.parentElement.style.display = 'none'; }); observer.unobserve(img); } }); });

// Load client videos
function aldiLoadClientVideos(clientId) { const client = aldiData.clientVideos[clientId]; if (!client) { aldiShowError('Client not found'); return; } aldiCurrentItems = client.videos; aldiCurrentType = 'video'; aldiGetEl('aldiPopupTitle').textContent = client.title; aldiGetEl('aldiClientTitle').textContent = client.title; aldiGetEl('aldiClientDescription').textContent = client.description; const videosHTML = client.videos.map((video, index) => `<div class="aldi-video-card" onclick="aldiOpenLightbox(${index})" style="animation-delay: ${index * 0.1}s;"><div class="aldi-video-wrapper"><iframe src="https://drive.google.com/file/d/${video.id}/preview" allowfullscreen loading="lazy"></iframe></div><h3 class="aldi-video-title">${video.title}</h3></div>`).join(''); aldiGetEl('aldiVideosGrid').innerHTML = videosHTML; aldiGetEl('aldiVideoPage').style.display = 'block'; aldiGetEl('aldiPhotoPage').style.display = 'none'; }

// Load portfolio photos
function aldiLoadPortfolio(clientId) { const portfolio = aldiData.portfolios[clientId]; if (!portfolio) { aldiShowError('Portfolio not found'); return; } aldiCurrentItems = portfolio.photos.map(photo => aldiBaseUrl + portfolio.path + photo); aldiCurrentType = 'photo'; aldiGetEl('aldiPopupTitle').textContent = portfolio.title; aldiRenderPhotos(); aldiGetEl('aldiVideoPage').style.display = 'none'; aldiGetEl('aldiPhotoPage').style.display = 'block'; const preloadCount = Math.min(6, aldiCurrentItems.length); Promise.all(aldiCurrentItems.slice(0, preloadCount).map(aldiPreloadImage)).then(() => { console.log('First batch preloaded'); }); }

// Render photos
function aldiRenderPhotos() { const grid = aldiGetEl('aldiPhotoGrid'); grid.innerHTML = ''; aldiCurrentItems.forEach((photoUrl, index) => { const photoItem = document.createElement('div'); photoItem.className = 'aldi-photo-item'; photoItem.style.animationDelay = `${index * 0.08}s`; photoItem.onclick = () => aldiOpenLightbox(index); const img = document.createElement('img'); img.alt = `Photo ${index + 1}`; img.loading = 'lazy'; img.classList.add('aldi-lazy'); if (index < 6) { img.src = photoUrl; } else { img.dataset.src = photoUrl; img.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E'; aldiImageObserver.observe(img); } img.onerror = function() { this.parentElement.style.display = 'none'; }; photoItem.appendChild(img); grid.appendChild(photoItem); }); }

// Show error message
function aldiShowError(message) { const videoGrid = aldiGetEl('aldiVideosGrid'); const photoGrid = aldiGetEl('aldiPhotoGrid'); if (videoGrid) videoGrid.innerHTML = `<div class="aldi-error">${message}</div>`; if (photoGrid) photoGrid.innerHTML = `<div class="aldi-error">${message}</div>`; }

// Lightbox functions
function aldiOpenLightbox(index) { if (aldiCurrentItems.length === 0) return; aldiCurrentIndex = index; const lightbox = aldiGetEl('aldiLightbox'); const lightboxVideo = aldiGetEl('aldiLightboxVideo'); const lightboxImg = aldiGetEl('aldiLightboxImg'); if (aldiCurrentType === 'video') { const video = aldiCurrentItems[index]; lightboxVideo.src = `https://drive.google.com/file/d/${video.id}/preview`; lightboxVideo.style.display = 'block'; lightboxImg.style.display = 'none'; } else { lightboxImg.style.opacity = '0.5'; aldiPreloadImage(aldiCurrentItems[index]).then(() => { lightboxImg.src = aldiCurrentItems[index]; lightboxImg.style.opacity = '1'; lightboxVideo.style.display = 'none'; lightboxImg.style.display = 'block'; const nextIndex = (index + 1) % aldiCurrentItems.length; const prevIndex = (index - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; aldiPreloadImage(aldiCurrentItems[nextIndex]); aldiPreloadImage(aldiCurrentItems[prevIndex]); }); } lightbox.classList.add('aldi-active'); }

function aldiCloseLightbox() { const lightbox = aldiGetEl('aldiLightbox'); lightbox.classList.remove('aldi-active'); aldiGetEl('aldiLightboxVideo').src = ''; }

function aldiNextItem() { if (aldiCurrentItems.length === 0) return; aldiCurrentIndex = (aldiCurrentIndex + 1) % aldiCurrentItems.length; if (aldiCurrentType === 'video') { const video = aldiCurrentItems[aldiCurrentIndex]; aldiGetEl('aldiLightboxVideo').src = `https://drive.google.com/file/d/${video.id}/preview`; } else { const img = aldiGetEl('aldiLightboxImg'); img.style.opacity = '0.5'; aldiPreloadImage(aldiCurrentItems[aldiCurrentIndex]).then(() => { img.src = aldiCurrentItems[aldiCurrentIndex]; img.style.opacity = '1'; const nextIndex = (aldiCurrentIndex + 1) % aldiCurrentItems.length; aldiPreloadImage(aldiCurrentItems[nextIndex]); }); } }

function aldiPrevItem() { if (aldiCurrentItems.length === 0) return; aldiCurrentIndex = (aldiCurrentIndex - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; if (aldiCurrentType === 'video') { const video = aldiCurrentItems[aldiCurrentIndex]; aldiGetEl('aldiLightboxVideo').src = `https://drive.google.com/file/d/${video.id}/preview`; } else { const img = aldiGetEl('aldiLightboxImg'); img.style.opacity = '0.5'; aldiPreloadImage(aldiCurrentItems[aldiCurrentIndex]).then(() => { img.src = aldiCurrentItems[aldiCurrentIndex]; img.style.opacity = '1'; const prevIndex = (aldiCurrentIndex - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; aldiPreloadImage(aldiCurrentItems[prevIndex]); }); } }

// Close popup function - simplified for iframe
function aldiClosePopup() { console.log('Closing popup...'); if (window.parent !== window) { window.parent.postMessage({action: 'closePopup'}, '*'); } }

// Event listeners
document.addEventListener('keydown', e => { if (aldiGetEl('aldiLightbox').classList.contains('aldi-active')) { if (e.key === 'Escape') aldiCloseLightbox(); if (e.key === 'ArrowLeft') aldiPrevItem(); if (e.key === 'ArrowRight') aldiNextItem(); } else if (e.key === 'Escape') { aldiClosePopup(); } });

// Touch events for mobile
aldiGetEl('aldiLightbox').addEventListener('touchstart', e => { aldiTouchStartX = e.changedTouches[0].screenX; aldiTouchStartTime = Date.now(); }, {passive: true});

aldiGetEl('aldiLightbox').addEventListener('touchend', e => { aldiTouchEndX = e.changedTouches[0].screenX; const touchDuration = Date.now() - aldiTouchStartTime; if (touchDuration < 300 && Math.abs(aldiTouchEndX - aldiTouchStartX) > 50) { aldiTouchEndX < aldiTouchStartX - 50 ? aldiNextItem() : aldiTouchEndX > aldiTouchStartX + 50 ? aldiPrevItem() : null; } }, {passive: true});

// Lightbox click to close
aldiGetEl('aldiLightbox').addEventListener('click', e => { if (e.target.id === 'aldiLightbox') aldiCloseLightbox(); });

// Message listener for parent window communication
window.addEventListener('message', event => { console.log('Received message:', event.data); if (event.data && event.data.action) { const {action, client, type} = event.data; if (action === 'loadContent' && client) { console.log(`Loading ${type} content for client: ${client}`); if (type === 'video' && aldiData.clientVideos[client]) { aldiLoadClientVideos(client); } else if (type === 'photo' && aldiData.portfolios[client]) { aldiLoadPortfolio(client); } else { console.error('Content not found for:', client, type); aldiShowError('Content not found'); } } } });

// Initialize on page load
window.addEventListener('load', () => { console.log('Page loaded, checking URL parameters...'); const client = aldiGetUrlParam('client'); const type = aldiGetUrlParam('type'); console.log('URL params - client:', client, 'type:', type); if (client && type) { if (type === 'video' && aldiData.clientVideos[client]) { console.log('Loading client videos:', client); aldiLoadClientVideos(client); } else if (type === 'photo' && aldiData.portfolios[client]) { console.log('Loading portfolio photos:', client); aldiLoadPortfolio(client); } else { console.error('Content not found for:', client, type); aldiShowError('Content not found'); } } else { console.log('No valid parameters found, showing default message'); aldiShowError('Please select a portfolio to view'); } });

// Debug info
console.log('Portfolio popup script loaded'); console.log('Available clients:', Object.keys(aldiData.clientVideos)); console.log('Available portfolios:', Object.keys(aldiData.portfolios));

})();
</script>
</body>
</html>
