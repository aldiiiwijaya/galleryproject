<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aldi Creative Portfolio</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { overflow: hidden; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; -webkit-font-smoothing: antialiased; background: transparent; min-height: 100vh; overflow: hidden; }
.aldi-main-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 0; background: transparent; }
.aldi-popup-overlay { position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; padding: 20px; opacity: 0; visibility: hidden; width: 100%; height: auto; min-height: auto; background: transparent; transform: scale(0.9); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
.aldi-popup-overlay.aldi-show { opacity: 1; visibility: visible; transform: scale(1); }
.aldi-popup-content { background: linear-gradient(145deg, rgba(10, 10, 10, 0.95), rgba(26, 26, 46, 0.9)); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; width: 100%; max-width: 1200px; max-height: 90vh; position: relative; overflow: hidden; margin: auto; backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
.aldi-header { padding: 16px 24px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: linear-gradient(145deg, rgba(10, 10, 10, 0.95), rgba(26, 26, 46, 0.9)); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); z-index: 10; min-height: 56px; }
.aldi-title { font-size: 18px; font-weight: 600; color: #ffffff; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; }
.aldi-close { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: #ffffff; font-size: 16px; cursor: pointer; padding: 6px; border-radius: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; z-index: 9999; }
.aldi-close:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.1) rotate(90deg); }
.aldi-body { padding: 0; max-height: calc(90vh - 56px); overflow-y: auto; overflow-x: hidden; scrollbar-width: none; -ms-overflow-style: none; }
.aldi-body::-webkit-scrollbar { display: none; }
.aldi-video-page { display: none; padding: 24px; animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
.aldi-photo-page { display: none; padding: 24px; animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
.aldi-videos-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 100%; margin: 0 auto; }
.aldi-photo-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 16px; justify-content: center; }
.aldi-video-card { background: linear-gradient(145deg, rgba(15, 15, 30, 0.8), rgba(30, 30, 60, 0.6)); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 16px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; display: flex; flex-direction: column; opacity: 0; transform: translateY(30px); animation: cardFadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; cursor: pointer; width: 100%; }
.aldi-photo-item { aspect-ratio: 1; border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); opacity: 0; transform: translateY(30px); animation: cardFadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
@keyframes cardFadeInUp { to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.aldi-video-card:hover { transform: translateY(-8px) scale(1.02); background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05)); border-color: rgba(255, 255, 255, 0.2); box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.3); }
.aldi-photo-item:hover { transform: scale(1.05) translateY(-8px); filter: brightness(1.1); border-color: rgba(255, 255, 255, 0.3); box-shadow: 0 15px 30px -8px rgba(0, 0, 0, 0.3); }
.aldi-video-wrapper { position: relative; width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: 12px; margin-bottom: 12px; background: #000; }
.aldi-video-wrapper iframe { width: 100%; height: 100%; border: none; border-radius: 12px; }
.aldi-photo-item img { width: 100%; height: 100%; object-fit: cover; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: absolute; top: 0; left: 0; }
.aldi-photo-item:hover img { transform: scale(1.1); }
.aldi-video-title { font-size: 14px; font-weight: 500; line-height: 1.3; color: #ffffff; text-align: center; opacity: 0.9; }
.aldi-lightbox { position: fixed; inset: 0; background: transparent; z-index: 99998; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); padding: 20px; }
.aldi-lightbox.aldi-active { opacity: 1; visibility: visible; background: transparent; }
.aldi-lightbox-content { position: relative; max-width: 90vw; max-height: 90vh; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
.aldi-lightbox.aldi-active .aldi-lightbox-content { transform: scale(1); }
.aldi-lightbox-video { width: 70vw; height: 39.4vw; max-width: 800px; max-height: 450px; min-width: 400px; min-height: 225px; border-radius: 12px; display: none; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
.aldi-lightbox-img { max-width: 80%; max-height: 80%; width: auto; height: auto; border-radius: 12px; object-fit: contain; display: none; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
.aldi-lightbox-close { position: fixed; top: 30px; right: 30px; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); color: #fff; font-size: 16px; cursor: pointer; padding: 8px; border-radius: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; z-index: 99999; }
.aldi-lightbox-close:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.1) rotate(90deg); }
.aldi-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); color: #fff; font-size: 16px; padding: 8px 10px; cursor: pointer; border-radius: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 99999; user-select: none; }
.aldi-nav:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-50%) scale(1.1); }
.aldi-prev { left: 30px; }
.aldi-next { right: 30px; }
.aldi-loading { display: flex; align-items: center; justify-content: center; height: 150px; color: rgba(255, 255, 255, 0.7); font-size: 16px; grid-column: 1 / -1; }
.aldi-error { display: flex; align-items: center; justify-content: center; height: 150px; color: #ff6b6b; font-size: 16px; grid-column: 1 / -1; }
@media (max-width: 1400px) { .aldi-photo-grid { grid-template-columns: repeat(5, 1fr); gap: 14px; } }
@media (max-width: 1200px) { .aldi-photo-grid { grid-template-columns: repeat(4, 1fr); gap: 14px; } }
@media (max-width: 1024px) { .aldi-videos-grid { grid-template-columns: repeat(2, 1fr); gap: 18px; } .aldi-photo-grid { grid-template-columns: repeat(4, 1fr); gap: 12px; } .aldi-photo-page { padding: 20px; } .aldi-popup-content { border-radius: 20px; } .aldi-popup-overlay { background: transparent; } }
@media (max-width: 768px) { .aldi-popup-overlay { padding: 0; background: transparent; } .aldi-popup-content { width: 100vw; height: 100vh; max-height: 100vh; border-radius: 0; } .aldi-header { padding: 12px 16px; min-height: 48px; } .aldi-title { font-size: 16px; } .aldi-close { width: 28px; height: 28px; font-size: 14px; } .aldi-body { max-height: calc(100vh - 48px); } .aldi-video-page { padding: 16px; } .aldi-photo-page { padding: 16px; } .aldi-videos-grid { grid-template-columns: 1fr; gap: 16px; } .aldi-photo-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; } .aldi-video-card { padding: 12px; } .aldi-video-title { font-size: 13px; } .aldi-lightbox-video { width: 90vw; height: 50.6vw; min-width: 280px; min-height: 158px; max-width: 600px; max-height: 338px; } .aldi-lightbox-img { max-width: 85vw; max-height: 70vh; } .aldi-lightbox-close { top: 20px; right: 20px; width: 28px; height: 28px; font-size: 14px; } .aldi-nav { font-size: 14px; padding: 6px 8px; } .aldi-prev { left: 20px; } .aldi-next { right: 20px; } }
@media (max-width: 480px) { .aldi-popup-overlay { padding: 0; background: transparent; margin: 0; width: 100vw; height: 100vh; } .aldi-popup-content { width: 100vw; height: 100vh; max-width: 100vw; max-height: 100vh; border-radius: 0; margin: 0; border: none; } .aldi-video-page { padding: 12px; } .aldi-photo-page { padding: 12px; } .aldi-photo-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; } .aldi-video-title { font-size: 12px; } .aldi-lightbox-video { width: 95vw; height: 53.4vw; min-width: 250px; min-height: 141px; } .aldi-lightbox-img { max-width: 90vw; max-height: 65vh; } .aldi-videos-grid { grid-template-columns: 1fr; } }
@media (max-width: 360px) { .aldi-photo-page { padding: 8px; } .aldi-photo-grid { gap: 6px; } }
</style>
</head>
<body>
<div class="aldi-main-container">
<div class="aldi-popup-overlay" id="aldiPopupOverlay">
<div class="aldi-popup-content">
<div class="aldi-header">
<h2 class="aldi-title" id="aldiPopupTitle">Portfolio</h2>
<button class="aldi-close" id="aldiCloseBtn" type="button">&times;</button>
</div>
<div class="aldi-body">
<div class="aldi-video-page" id="aldiVideoPage">
<div class="aldi-videos-grid" id="aldiVideosGrid">
<div class="aldi-loading">Loading videos...</div>
</div>
</div>
<div class="aldi-photo-page" id="aldiPhotoPage">
<div class="aldi-photo-grid" id="aldiPhotoGrid">
<div class="aldi-loading">Loading photos...</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="aldi-lightbox" id="aldiLightbox">
<div class="aldi-lightbox-content">
<iframe class="aldi-lightbox-video" id="aldiLightboxVideo" allowfullscreen></iframe>
<img class="aldi-lightbox-img" id="aldiLightboxImg" alt="Photo">
<button class="aldi-lightbox-close" id="aldiLightboxCloseBtn" type="button">&times;</button>
<button class="aldi-nav aldi-prev" id="aldiPrevBtn" type="button">&lt;</button>
<button class="aldi-nav aldi-next" id="aldiNextBtn" type="button">&gt;</button>
</div>
</div>
<script>
(function() {
'use strict';
const aldiData = { 
  clientVideos: { 
    '8amities': { 
      title: "8'amities", 
      description: "Konten visual fashion kasual yang memperkuat branding dan daya tarik audiens dengan foto dan video dinamis.", 
      videos: [ 
        {title: "8'Amities Astro", id: "1eVyUJjRVVBAOSIEDDRUPq-w9SinkjbNq"}, 
        {title: "8'Amities Stan", id: "1wvkUBOtxGbA-yKIOx3evA5FRWTclbkEG"}, 
        {title: "8'Amities GBK", id: "1oog_2GnLg5Bf7ygQh9LgY5dZPIrVwr-m"} 
      ] 
    }, 
    'cemilanketo': { 
      title: "Cemilan Keto", 
      description: "Konten edukatif cemilan sehat keto yang menampilkan produk berkualitas dengan visual menggugah selera.", 
      videos: [ 
        {title: "Pizza", id: "1ylrXLPCeESz0uhx2AFLWm1MO2ioz0-q5"}, 
        {title: "Jajanan Pasar", id: "1yVkp8z7oTmDw_piImzHLL-8WzUlWuhR5"}, 
        {title: "Dimsum", id: "1Yo4mu28jNF7rEBy7LGVR3vyah7UJQpon"}, 
        {title: "Olahan Ayam", id: "1O01ZMw55-Ahm7Nl6tmM33OSpgwLZuEhD"} 
      ] 
    },
    'ribsgold': {
      title: "Ribsgold",
      description: "Strategi konten unisex fashion yang menyasar pria dan wanita dengan visual modern dan gaya kontemporer.",
      videos: [
        { title: "Kemeja Togs", id: "1Z92xucR5FNXt-Vl0QjfScgBPSKNdu2Bn" },
        { title: "Bevery Unique", id: "19oKWsTqhWSGkc2DNS13pHqwYqqnnv2d2" },
        { title: "Kemeja Flanel", id: "10G217ouwOhJyTqpU0kjvWEFgKF0-0cBe" },
        { title: "Tampil Timless", id: "1ll48B46L1iXRlLG7IkE6o_4rAKYvtNnJ" },
        { title: "Outfit Sehari Hari", id: "1hY_q2AWmFqWHCI0PiEvzHAne6Eo4L54v" },
        { title: "Anak Motor", id: "1nJ09BvdcahFq0oZm_wLGPK2qJ7VfmLir" },
        { title: "Drama Rese", id: "1HnKdnOHXbWXUvRnzba6Q0eTeIIRZ2h3i" },
        { title: "Kado Buat Ayah", id: "1aElb50aKJoXbg40xYJSU_j2wo2WPZZNr" }
      ]
    },
    'bymanda': {
      title: "Bymanda",
      description: "Strategi media sosial kreatif dengan konten visual yang efektif menyampaikan pesan brand dan engagement.",
      videos: [
        { title: "Cadar", id: "1d3kCw4Jrut3qRPqSGYQ_ERL87FSc7k-C" },
        { title: "Gamis I", id: "1WUgGKElKs1oU1Pwne38JGGPn3cMAc4ox" },
        { title: "Gamis II", id: "1OeCJOINqDVeVdpBgzEOWvYrK9KW6Opr8" },
        { title: "Mukena", id: "1DD-y6ceziLZ5kVEIF3UvA5f1QbY43Quh" }
      ]
    }
  }, 
  portfolios: { 
    'amities': { 
      title: "8'Amities Fashion Photography", 
      path: "8'Amities/", 
      photos: [ 'Astro%20(1).webp', 'Astro%20(2).webp', 'Astro%20(3).webp', 'Astro%20(4).webp', 'Astro%20(5).webp', 'GBK%20(1).webp', 'GBK%20(2).webp', 'GBK%20(3).webp', 'GBK%20(4).webp', 'GBK%20(5).webp', 'Stan%20(1).webp', 'Stan%20(2).webp', 'Stan%20(3).webp', 'Stan%20(4).webp', 'Stan%20(5).webp' ] 
    }, 
    'accent': { 
      title: 'Accent Ambios Product Photography', 
      path: 'Accent%20Ambios/', 
      photos: Array.from({length: 10}, (v, k) => `Accent%20Ambios%20(${k + 1}).webp`) 
    }, 
    'ribsgold': { 
      title: 'Ribsgold Product Photography', 
      path: 'Ribsgold/', 
      photos: Array.from({length: 10}, (v, k) => `Ribsgold%20(${k + 1}).webp`) 
    }, 
    'kopi': { 
      title: 'Kopi Bituka Cafe Photography', 
      path: 'Kopi%20Bituka/', 
      photos: Array.from({length: 10}, (v, k) => `Kopi%20Bituka%20(${k + 1}).webp`) 
    }, 
    'bride': { 
      title: 'White Bride Wedding Collection', 
      path: 'White%20Bride/', 
      photos: Array.from({length: 10}, (v, k) => `White%20Bride%20(${k + 1}).webp`) 
    } 
  } 
};
const aldiBaseUrl = 'https://raw.githubusercontent.com/aldiiiwijaya/aldiiiwijaya_/main/Foto/Foto%20';
let aldiCurrentItems = [];
let aldiCurrentIndex = 0;
let aldiCurrentType = '';
let aldiImageCache = new Map();
let aldiTouchStartX = 0;
let aldiTouchEndX = 0;
let aldiTouchStartTime = 0;
function aldiGetEl(id) { return document.getElementById(id); }
function aldiGetUrlParam(param) { return new URLSearchParams(window.location.search).get(param); }
function aldiPreloadImage(src) { return new Promise((resolve, reject) => { if (aldiImageCache.has(src)) { resolve(aldiImageCache.get(src)); return; } const img = new Image(); img.onload = () => { aldiImageCache.set(src, img); resolve(img); }; img.onerror = reject; img.src = src; }); }
const aldiImageObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; aldiPreloadImage(img.dataset.src).then(() => { img.src = img.dataset.src; img.classList.add('aldi-loaded'); }).catch(() => { img.parentElement.style.display = 'none'; }); observer.unobserve(img); } }); });
function aldiLoadClientVideos(clientId) { 
  const client = aldiData.clientVideos[clientId]; 
  if (!client) { aldiShowError('Client not found'); return; } 
  aldiCurrentItems = client.videos; 
  aldiCurrentType = 'video'; 
  aldiGetEl('aldiPopupTitle').textContent = client.title; 
  const videosHTML = client.videos.map((video, index) => `
    <div class="aldi-video-card" onclick="aldiOpenLightbox(${index})" style="animation-delay: ${index * 0.1}s;">
      <div class="aldi-video-wrapper">
        <iframe src="https://drive.google.com/file/d/${video.id}/preview" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="aldi-video-title">${video.title}</div>
    </div>
  `).join(''); 
  aldiGetEl('aldiVideosGrid').innerHTML = videosHTML; 
  aldiGetEl('aldiVideoPage').style.display = 'block'; 
  aldiGetEl('aldiPhotoPage').style.display = 'none'; 
}
function aldiLoadPortfolio(clientId) { const portfolio = aldiData.portfolios[clientId]; if (!portfolio) { aldiShowError('Portfolio not found'); return; } aldiCurrentItems = portfolio.photos.map(photo => aldiBaseUrl + portfolio.path + photo); aldiCurrentType = 'photo'; aldiGetEl('aldiPopupTitle').textContent = portfolio.title; aldiRenderPhotos(); aldiGetEl('aldiVideoPage').style.display = 'none'; aldiGetEl('aldiPhotoPage').style.display = 'block'; const preloadCount = Math.min(6, aldiCurrentItems.length); Promise.all(aldiCurrentItems.slice(0, preloadCount).map(aldiPreloadImage)).then(() => { console.log('First batch preloaded'); }); }
function aldiRenderPhotos() { const grid = aldiGetEl('aldiPhotoGrid'); grid.innerHTML = ''; aldiCurrentItems.forEach((photoUrl, index) => { const photoItem = document.createElement('div'); photoItem.className = 'aldi-photo-item'; photoItem.style.animationDelay = `${index * 0.05}s`; photoItem.onclick = () => aldiOpenLightbox(index); const img = document.createElement('img'); img.alt = `Photo ${index + 1}`; img.loading = 'lazy'; img.classList.add('aldi-lazy'); if (index < 6) { img.src = photoUrl; } else { img.dataset.src = photoUrl; img.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E'; aldiImageObserver.observe(img); } img.onerror = function() { this.parentElement.style.display = 'none'; }; photoItem.appendChild(img); grid.appendChild(photoItem); }); }
function aldiShowError(message) { const videoGrid = aldiGetEl('aldiVideosGrid'); const photoGrid = aldiGetEl('aldiPhotoGrid'); if (videoGrid) videoGrid.innerHTML = `<div class="aldi-error">${message}</div>`; if (photoGrid) photoGrid.innerHTML = `<div class="aldi-error">${message}</div>`; }
function aldiOpenLightbox(index) { 
  if (aldiCurrentItems.length === 0) return; 
  aldiCurrentIndex = index; 
  console.log('Opening lightbox, index:', index, 'type:', aldiCurrentType, 'total items:', aldiCurrentItems.length);
  const lightbox = aldiGetEl('aldiLightbox'); 
  const lightboxVideo = aldiGetEl('aldiLightboxVideo'); 
  const lightboxImg = aldiGetEl('aldiLightboxImg'); 
  const prevBtn = aldiGetEl('aldiPrevBtn');
  const nextBtn = aldiGetEl('aldiNextBtn');
  const popupContent = document.querySelector('.aldi-popup-content');
  
  if (aldiCurrentType === 'video') { 
    const video = aldiCurrentItems[index]; 
    lightboxVideo.src = `https://drive.google.com/file/d/${video.id}/preview`; 
    lightboxVideo.style.display = 'block'; 
    lightboxImg.style.display = 'none'; 
    if (prevBtn) prevBtn.style.display = 'block';
    if (nextBtn) nextBtn.style.display = 'block';
  } else { 
    console.log('Loading photo:', aldiCurrentItems[index]);
    lightboxImg.style.opacity = '0.5'; 
    if (prevBtn) prevBtn.style.display = 'block';
    if (nextBtn) nextBtn.style.display = 'block';
    
    aldiPreloadImage(aldiCurrentItems[index]).then(() => { 
      lightboxImg.src = aldiCurrentItems[index]; 
      lightboxImg.style.opacity = '1'; 
      lightboxVideo.style.display = 'none'; 
      lightboxImg.style.display = 'block'; 
      const nextIndex = (index + 1) % aldiCurrentItems.length; 
      const prevIndex = (index - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; 
      aldiPreloadImage(aldiCurrentItems[nextIndex]); 
      aldiPreloadImage(aldiCurrentItems[prevIndex]); 
    }).catch(err => {
      console.error('Error loading image:', err);
    }); 
  } 
  
  lightbox.classList.add('aldi-active'); 
  if (popupContent) {
    popupContent.style.filter = 'blur(2px)';
    popupContent.style.transition = 'filter 0.3s ease';
  }
}
function aldiCloseLightbox() { 
  const lightbox = aldiGetEl('aldiLightbox');
  const popupContent = document.querySelector('.aldi-popup-content');
  
  lightbox.classList.remove('aldi-active'); 
  
  if (popupContent) {
    popupContent.style.filter = 'none';
  }
  
  setTimeout(() => { 
    aldiGetEl('aldiLightboxVideo').src = ''; 
  }, 300); 
}
function aldiNextItem() { 
  if (aldiCurrentItems.length === 0) return; 
  aldiCurrentIndex = (aldiCurrentIndex + 1) % aldiCurrentItems.length; 
  console.log('Next item, new index:', aldiCurrentIndex, 'type:', aldiCurrentType);
  if (aldiCurrentType === 'video') { 
    const video = aldiCurrentItems[aldiCurrentIndex]; 
    aldiGetEl('aldiLightboxVideo').src = `https://drive.google.com/file/d/${video.id}/preview`; 
  } else { 
    const img = aldiGetEl('aldiLightboxImg'); 
    const photoUrl = aldiCurrentItems[aldiCurrentIndex]; 
    console.log('Loading next photo:', photoUrl);
    img.style.opacity = '0.5'; 
    aldiPreloadImage(photoUrl).then(() => { 
      img.src = photoUrl; 
      img.style.opacity = '1'; 
      console.log('Next photo loaded successfully');
      const nextIndex = (aldiCurrentIndex + 1) % aldiCurrentItems.length; 
      aldiPreloadImage(aldiCurrentItems[nextIndex]); 
    }).catch(err => {
      console.error('Error loading next photo:', err);
    }); 
  } 
}
function aldiPrevItem() { 
  if (aldiCurrentItems.length === 0) return; 
  aldiCurrentIndex = (aldiCurrentIndex - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; 
  console.log('Previous item, new index:', aldiCurrentIndex, 'type:', aldiCurrentType);
  if (aldiCurrentType === 'video') { 
    const video = aldiCurrentItems[aldiCurrentIndex]; 
    aldiGetEl('aldiLightboxVideo').src = `https://drive.google.com/file/d/${video.id}/preview`; 
  } else { 
    const img = aldiGetEl('aldiLightboxImg'); 
    const photoUrl = aldiCurrentItems[aldiCurrentIndex]; 
    console.log('Loading previous photo:', photoUrl);
    img.style.opacity = '0.5'; 
    aldiPreloadImage(photoUrl).then(() => { 
      img.src = photoUrl; 
      img.style.opacity = '1'; 
      console.log('Previous photo loaded successfully');
      const prevIndex = (aldiCurrentIndex - 1 + aldiCurrentItems.length) % aldiCurrentItems.length; 
      aldiPreloadImage(aldiCurrentItems[prevIndex]); 
    }).catch(err => {
      console.error('Error loading previous photo:', err);
    }); 
  } 
}
function aldiClosePopup() { 
  console.log('🚪 Closing popup...');
  
  const messages = [
    'closePopup',
    'close',
    { action: 'closePopup' },
    { action: 'close' },
    { type: 'close' }
  ];
  
  messages.forEach(msg => {
    try {
      console.log('📤 Sending message to parent:', msg);
      if (window.parent && window.parent !== window) {
        window.parent.postMessage(msg, '*');
      }
      if (window.top && window.top !== window) {
        window.top.postMessage(msg, '*');
      }
    } catch (e) {
      console.warn('Failed to send message:', e);
    }
  });
  
  setTimeout(() => {
    if (window.parent !== window) {
      try {
        window.parent.postMessage('FORCE_CLOSE', '*');
      } catch (e) {
        console.warn('Force close failed:', e);
      }
    }
  }, 100);
}
aldiGetEl('aldiCloseBtn').addEventListener('click', function(e) {
  e.preventDefault();
  e.stopPropagation();
  console.log('Close button clicked');
  aldiClosePopup();
});
aldiGetEl('aldiLightboxCloseBtn').addEventListener('click', function(e) {
  e.preventDefault();
  e.stopPropagation();
  console.log('Lightbox close button clicked');
  aldiCloseLightbox();
});
aldiGetEl('aldiPrevBtn').addEventListener('click', function(e) {
  e.preventDefault();
  e.stopPropagation();
  console.log('Previous button clicked');
  aldiPrevItem();
});
aldiGetEl('aldiNextBtn').addEventListener('click', function(e) {
  e.preventDefault();
  e.stopPropagation();
  console.log('Next button clicked');
  aldiNextItem();
});
document.addEventListener('keydown', e => { 
  if (e.key === 'Escape') {
    if (aldiGetEl('aldiLightbox').classList.contains('aldi-active')) {
      console.log('⌨️ ESC pressed in lightbox');
      aldiCloseLightbox();
    } else {
      console.log('⌨️ ESC pressed in popup');
      aldiClosePopup();
    }
  }
  if (aldiGetEl('aldiLightbox').classList.contains('aldi-active')) {
    if (e.key === 'ArrowLeft') aldiPrevItem();
    if (e.key === 'ArrowRight') aldiNextItem();
  }
});
aldiGetEl('aldiLightbox').addEventListener('touchstart', e => { aldiTouchStartX = e.changedTouches[0].screenX; aldiTouchStartTime = Date.now(); }, {passive: true});
aldiGetEl('aldiLightbox').addEventListener('touchend', e => { aldiTouchEndX = e.changedTouches[0].screenX; const touchDuration = Date.now() - aldiTouchStartTime; if (touchDuration < 300 && Math.abs(aldiTouchEndX - aldiTouchStartX) > 50) { aldiTouchEndX < aldiTouchStartX - 50 ? aldiNextItem() : aldiTouchEndX > aldiTouchStartX + 50 ? aldiPrevItem() : null; } }, {passive: true});
aldiGetEl('aldiLightbox').addEventListener('click', e => { if (e.target.id === 'aldiLightbox') { console.log('🖱️ Lightbox background clicked'); aldiCloseLightbox(); } });
window.addEventListener('message', event => { console.log('Received message:', event.data); if (event.data && event.data.action) { const {action, client, type} = event.data; if (action === 'loadContent' && client) { console.log(`Loading ${type} content for client: ${client}`); if (type === 'video' && aldiData.clientVideos[client]) { aldiLoadClientVideos(client); } else if (type === 'photo' && aldiData.portfolios[client]) { aldiLoadPortfolio(client); } else { console.error('Content not found for:', client, type); aldiShowError('Content not found'); } } } });
window.addEventListener('load', () => { 
  console.log('Page loaded, checking URL parameters...'); 
  const client = aldiGetUrlParam('client'); 
  const type = aldiGetUrlParam('type'); 
  console.log('URL params - client:', client, 'type:', type); 
  
  setTimeout(() => {
    aldiGetEl('aldiPopupOverlay').classList.add('aldi-show');
  }, 100);
  
  if (client && type) { 
    if (type === 'video' && aldiData.clientVideos[client]) { 
      console.log('Loading client videos:', client); 
      aldiLoadClientVideos(client); 
    } else if (type === 'photo' && aldiData.portfolios[client]) { 
      console.log('Loading portfolio photos:', client); 
      aldiLoadPortfolio(client); 
    } else { 
      console.error('Content not found for:', client, type); 
      aldiShowError('Content not found'); 
    } 
  } else { 
    console.log('No valid parameters found, showing default message'); 
    aldiShowError('Please select a portfolio to view'); 
  } 
});
console.log('Portfolio popup script loaded'); console.log('Available clients:', Object.keys(aldiData.clientVideos)); console.log('Available portfolios:', Object.keys(aldiData.portfolios));
})();
</script>
</body>
</html>
